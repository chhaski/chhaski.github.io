<!DOCTYPE html>
<html lang="en">

<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3@7/+esm"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <meta charset="UTF-8" lang="en" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>video archive</title>
  <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>
  <header>
    </article>
    <nav id="nav">
      <ul>
        <li>
          <a title="home" href="index.html">
            saskia 'chaski' knowles
          </a>
        </li>
        <li>
          <a title="projects" href="proj.html">
            projects
          </a>
        </li>
        <li>
          <a title="info" href="info.html">
            info
          </a>
        </li>
      </ul>
    </nav>
  </header>

<main id="main" class="projects">
    <h1> Videos Archive </h1>
    <h4>selected sketches made with code</h4>
    <div id="image-grid" class="image-grid">
        <!-- Blocks will be loaded here -->
    </div>
</main>
    </div>

    <script>
        async function fetchBlocks(page) {
            try {
                const response = await fetch(`https://api.are.na/v2/channels/chaski_videos/contents?page=${page}`);
                const data = await response.json();
                return data.contents.map(content => ({
                    image: content.image,
                    title: content.title,
                    descriptionHtml: content.description_html, // Fetch description_html
                    url: content.source && content.source.url ? content.source.url : null
                })).filter(block => block.image || block.title || block.descriptionHtml);
            } catch (error) {
                console.error('Error:', error);
                return [];
            }
        }
        
        function displayBlocks(blocks) {
    const container = document.getElementById('image-grid');

    blocks.forEach(block => {
        // Log the content of block.descriptionHtml
        console.log('Description HTML:', block.descriptionHtml);

        const blockAnchor = document.createElement('a');
        blockAnchor.className = 'block-item';
        blockAnchor.style.cursor = 'pointer';
        blockAnchor.href = block.url ? block.url : '#';
        blockAnchor.target = '_blank'; // Open URL in a new tab

        if (block.image && block.image.original && block.image.original.url) {
            const img = document.createElement('img');
            img.src = block.image.original.url;
            img.className = 'image-item';
            img.onerror = () => img.src = 'Group 1.png'; // Fallback image URL
            blockAnchor.appendChild(img);
        }

        if (block.title) {
            const title = document.createElement('div');
            title.className = 'block-title';
            title.textContent = block.title;
            blockAnchor.appendChild(title);
        }

        if (block.descriptionHtml) {
            const description = document.createElement('div');
            description.className = 'block-description';
            description.innerHTML = block.descriptionHtml;
            blockAnchor.appendChild(description);
        }

        container.appendChild(blockAnchor);
    });
}

        
        async function loadBlocks() {
            let blocks = [];
            const page1 = await fetchBlocks(1);
            const page2 = await fetchBlocks(2);
        
            blocks = blocks.concat(page1, page2);
            displayBlocks(blocks);
        }
        
        loadBlocks();
        </script>
        
</body>
</html>
